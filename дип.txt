–°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ Linux-—Å–µ—Ä–≤–µ—Ä–∞—Ö (Debian 12)

1. HQ-SRV (–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä)

–û—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
apt install openssh-server sudo bind9 dnsutils chrony nfs-kernel-server mdadm

–î–ª—è Moodle (LMS)
apt install apache2 mariadb-server php libapache2-mod-php php-mysql php-xml php-gd php-zip php-intl php-curl php-mbstring

# –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Zabbix)
apt install zabbix-server-mysql zabbix-frontend-php zabbix-apache-conf zabbix-sql-scripts zabbix-agent

# –î–ª—è –ø—Ä–∏–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–∞ (CUPS)
apt install cups printer-driver-cups-pdf
```

#### **2. BR-SRV (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)**  
```bash
# –î–æ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Samba AD)
apt install samba winbind libpam-winbind libnss-winbind libpam-krb5 krb5-config krb5-user krb5-kdc

# Docker –∏ MediaWiki
apt install docker.io docker-compose
```

#### **3. HQ-CLI (–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –º–∞—à–∏–Ω–∞)**  
```bash
# –î–ª—è —Ä–∞–±–æ—Ç—ã —Å NFS –∏ –¥–æ–º–µ–Ω–æ–º
apt install nfs-common winbind libpam-winbind libnss-winbind krb5-config samba-dsdb-modules samba-vfs-modules

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
apt install firefox-esr yandex-browser-stable
```

#### **4. CLI (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç)**  
```bash
# –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
apt install openssh-client chrony
```

---

### **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**  
1. **–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏** –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å (–∫–æ–Ω—Ñ–∏–≥–∏ –≤ `/etc/`).  
2. –î–ª—è **Samba AD** –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `smb.conf` –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞.  
3. –î–ª—è **Docker** –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É `docker`:  
   ```bash
   usermod -aG docker $USER
   ```
4. **–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏**:  
   - –°–Ω–∞—á–∞–ª–∞ –±–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã (SSH, DNS, NTP).  
   - –ü–æ—Ç–æ–º —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (Moodle, Zabbix, Samba).  

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ ‚Äî —É—Ç–æ—á–Ω–∏—Ç–µ! üõ†Ô∏è
#### **–ú–æ–¥—É–ª—å –ê: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤**  
1. **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Å—Ä–µ–¥—ã**  
   - –°–æ–∑–¥–∞—Ç—å –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—é –≤ **EVE-NG** —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞–º–∏ (**ISP, HQ-RTR, BR-RTR**) –∏ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–æ–º (**HQ-SW**).  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã (**HQ-SRV, HQ-CLI, BR-SRV, CLI**) –≤ **vCloud Director** (4 –ì–ë RAM, 4 CPU, Debian 12).  

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ IP-–∞–¥—Ä–µ—Å–∞—Ü–∏–∏**  
   - –ù–∞–∑–Ω–∞—á–∏—Ç—å IP-–∞–¥—Ä–µ—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–∞–±–ª–∏—Ü–µ.  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VLAN (100, 200, 999) –∏ –ø–æ–¥—Å–µ—Ç–∏.  
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑–Ω–æ—Å—Ç—å (`ping`).  

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ NAT –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏**  
   - –í–∫–ª—é—á–∏—Ç—å NAT –Ω–∞ **ISP, HQ-RTR, BR-RTR**.  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.  

4. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**  
   - –ù–∞ **HQ-SRV** –∏ **BR-SRV**: —Å–æ–∑–¥–∞—Ç—å `sshuser` (UID 1010, –ø–∞—Ä–æ–ª—å `P@ssw0rd`, sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è).  
   - –ù–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞—Ö: —Å–æ–∑–¥–∞—Ç—å `net_admin` (–ø–∞—Ä–æ–ª—å `P@$$word`, –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ 15).  

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH**  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `openssh-server` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö.  
   - –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç –Ω–∞ **2024**, –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ (`MaxAuthTries 2`), –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–Ω–Ω–µ—Ä.  

---

#### **–ú–æ–¥—É–ª—å –ë: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤**  
1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DHCP**  
   - –ù–∞ **HQ-RTR** —Å–æ–∑–¥–∞—Ç—å –ø—É–ª –¥–ª—è **HQ-CLI**:  
     ```bash
     ip dhcp pool HQ-CLI-POOL
     network 192.168.12.0 255.255.255.240
     default-router 192.168.12.14
     dns-server 192.168.11.1
     ```  

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS (Bind9)**  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `bind9` –Ω–∞ **HQ-SRV**.  
   - –°–æ–∑–¥–∞—Ç—å –∑–æ–Ω—ã:  
     - –ü—Ä—è–º—É—é (`au-team.irpo`) —Å –∑–∞–ø–∏—Å—è–º–∏ A, PTR, CNAME.  
     - –û–±—Ä–∞—Ç–Ω—ã–µ (`11.168.192.in-addr.arpa` –∏ –¥—Ä.).  

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ NTP (Chrony)**  
   - –ù–∞ **HQ-SRV** –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–∏:  
     ```bash
     local stratum 5
     allow 0.0.0.0/0
     ```  
   - –ù–∞ –∫–ª–∏–µ–Ω—Ç–∞—Ö (**HQ-RTR, BR-RTR, HQ-CLI, BR-SRV**) —É–∫–∞–∑–∞—Ç—å **HQ-SRV** –∫–∞–∫ NTP-—Å–µ—Ä–≤–µ—Ä.  

4. **RAID 5 –∏ NFS**  
   - –ù–∞ **HQ-SRV** —Å–æ–∑–¥–∞—Ç—å RAID 5 –∏–∑ 3 –¥–∏—Å–∫–æ–≤:  
     ```bash
     mdadm --create /dev/md0 --level=5 --raid-devices=3 /dev/sdb /dev/sdc /dev/sdd
     mkfs.ext4 /dev/md0
     mount /dev/md0 /raid5
     ```  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å NFS –¥–ª—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ `/raid5/nfs` —Å **HQ-CLI**.  

5. **–î–æ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (Samba)**  
   - –ù–∞ **BR-SRV** —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –¥–æ–º–µ–Ω `AU-TEAM.IRPO`:  
     ```bash
     samba-tool domain provision
     systemctl restart samba-ad-dc
     ```  
   - –î–æ–±–∞–≤–∏—Ç—å **HQ-CLI** –≤ –¥–æ–º–µ–Ω:  
     ```bash
     net ads join -U administrator -S au-team.irpo
     ```  

6. **Moodle (LMS)**  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Apache, PHP, MariaDB –Ω–∞ **HQ-SRV**.  
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Moodle (`/var/www/html/moodle`), –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.  

7. **Zabbix (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)**  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Zabbix –Ω–∞ **HQ-SRV**, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —á–µ—Ä–µ–∑ SNMP (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã) –∏ Zabbix Agent (—Å–µ—Ä–≤–µ—Ä—ã).  

8. **CUPS (–ø—Ä–∏–Ω—Ç-—Å–µ—Ä–≤–µ—Ä)**  
   - –ù–∞ **HQ-SRV** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CUPS, –¥–æ–±–∞–≤–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π PDF-–ø—Ä–∏–Ω—Ç–µ—Ä, –ø–æ–¥–∫–ª—é—á–∏—Ç—å **HQ-CLI**.  

---

#### **–ú–æ–¥—É–ª—å –í: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**  
1. **VPN (GRE + IPsec)**  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å –º–µ–∂–¥—É **HQ-RTR** –∏ **BR-RTR**:  
     ```bash
     interface Tunnel0
     ip address 192.168.254.1 255.255.255.252
     tunnel source e0/0
     tunnel destination 172.16.5.1
     ```  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å IPsec –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.  

2. **OSPF**  
   - –í–∫–ª—é—á–∏—Ç—å OSPF –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–∞—Ö –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:  
     ```bash
     router ospf 1
     network 192.168.11.0 0.0.0.63 area 0
     ```  

3. **Ansible**  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ansible –Ω–∞ **BR-SRV**, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ SSH.  

4. **Docker (MediaWiki)**  
   - –ù–∞ **BR-SRV** —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å MediaWiki –∏ MariaDB –≤ Docker:  
     ```bash
     docker-compose -f wiki.yml up -d
     ```  
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ `LocalSettings.php`.  

---

### **–ò—Ç–æ–≥**  
- **–ú–æ–¥—É–ª—å –ê**: –ë–∞–∑–æ–≤–∞—è —Å–µ—Ç—å, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.  
- **–ú–æ–¥—É–ª—å –ë**: DNS, NTP, RAID, –¥–æ–º–µ–Ω, Moodle, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ø—Ä–∏–Ω—Ç-—Å–µ—Ä–≤–µ—Ä.  
- **–ú–æ–¥—É–ª—å –í**: VPN, OSPF, Ansible, Docker.  

–í—ã–ø–æ–ª–Ω—è–π—Ç–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
